<!DOCTYPE>
<!DOCTYPE html>
<html>
<head>	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	   
	<link rel="stylesheet" type="text/css" href="style.css">

	<link rel="stylesheet" type="text/css" href="reset.css">

	<link rel="stylesheet" type="text/css" href="font-awesome-4.6.3/css/font-awesome.css">

	<link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>

     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <link rel="stylesheet" type="text/css" href="style.css">    

    <link rel="stylesheet" type="text/css" href="reset.css">

    <link rel="stylesheet" type="text/css" href="font-awesome-4.6.3/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="reset.css">

    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <title>Welcome Home</title>
    

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqFzoHdRxRZ3Hrv9jdT_uZbJxayyLUqgw&libraries=places"></script>
    <script type="text/javascript">

// Create a client with the Paho Api. set it to the correct broker ip, port and your "signature"
 var client = new Paho.MQTT.Client("176.10.136.208", 9001, "web" + Math.random());
 
 //Gets  called if the websocket/mqtt connection gets disconnected for any reason
 client.onConnectionLost = function (responseObject) {
     //Messages if the connection is lost
     alert("connection lost: " + responseObject.errorMessage);
 };
 //When a message is recieved from the topic you are subscribed to it gets printed.
 client.onMessageArrived = function (message) {
     //Do something with the push message you received

     //this will need to be changed
     $('#messages').append('<span>Topic: ' + message.destinationName + '  | ' + message.payloadString + '</span><br/>');
 };
 //Theese are the options for the connection
 var options = {
     timeout: 3,
     //Messages when the connection is established
     onSuccess: function () {
         client.subscribe('deal/gogodeals/database/clients', {qos: 2});
     },
     //Messages if the connection was a failure
     onFailure: function (message) {
         alert("Connection failed: " + message.errorMessage);
     }
 };

var publish = function (payload, topic, qos) {
   var message = new Paho.MQTT.Message(payload);
   message.destinationName = topic;
   message.qos = qos;
   client.send(message);
            //client.disconnect(); 
        };

 function publishStuff() {
    var check = 0;
    var  usernamec= document.getElementById('username');
    var password = document.getElementById('password');
    

    if (!username.value == "") {
        check++;
        username.style.border='transparent';

    } else {
       username.style.border='solid';
       username.style.borderColor = "red";
       username.placeholder = 'Enter a Username';
    }

    if (!password.value == "") {
    password.style.border='transparent';
    check++;

    } else {
      password.style.border='solid';
      password.style.borderColor = "red";
      password.placeholder = 'Enter a Password'; 
    }

    if (check === 6) {
      alert('Loggin you in!');
      window.location="home.html";
      publish(
        '{"id": Super special company ID, Data:{ ' +
        'username:' + document.getElementById('username').value + '; ' +
        'password:' + document.getElementById('password').value + ' }; }',
        'deal/gogodeals/client/info',2);  

       
    }


}

function login(){
    alert('You have been registered');
    window.location="home.html";
    //you will have to make publish stuff her publish the correct data
    publishstuff();
}


client.connect(options);


</script>

	<title>Join the club!</title>
</head>

<body>
	<header>	
		<div class="wrapper">
			<h1>GoGo Deals<span class="color"></span></h1>
			<nav>
				<ul>
					<li><a href="index.html">Home</a></li>
				</ul>
			</nav>
		</div>
	</header>
<div id ="login" > <!--class="wrapper">-->
    <div class="reg-container">
    	<!--Just need to inset a pic, I want to see if we can use their facebook profile pic-->
    	 <img src="images/features-icon-1.png" alt="Smiley face" height="120" width="auto">
    	<form>
    		<div class="form-input">
    			<input type="text" name="username" id="username" placeholder=" Enter Username">
    		</div>
    		<div class="form-input">
    			<input type="password" name="password" id="password" placeholder=" Enter Password">
    		</div>
    		<div class="form-input">
    			<input type="text" name="name" id="name" placeholder=" Name"> 
    		</div>
    		<div class="form-input">
    			<input type="text" name="business name" id="buss_name" placeholder=" Company Name">
    		</div>

    		<div class="form-input">
    			<input type="text" name="email" id="email" placeholder=" Email Address">
    		</div>
    		<div class="form-input">
    			<input type="text" name="country" id="country" placeholder=" Country">
    		</div>
    		
    		<a type="submit" name="submit" class="btn-login" onclick ="login()" >Sign-Up</a>
            

    		<!--<a href="#" class="fp">Forgot Your Password?</a><br><br>
        <a href="register.html" class="ca">Create New Account</a>-->
    	</form>
    	</div>
    </div>
    </div>

</body>
<footer>
    	<div class="wrapper">
    		<div id="footer-info">
    			<p>Copyright 2016 GoGoDeals. All rights reserved.</p>
    			<p><a href="#">Terms of Service</a> | <a href="#">Privacy</a></p>
    		</div>
    		<div id="footer-links">
    			<ul>
    				<li><h5>Company</h5></li>
    				<li><a href="#">About us</a></li>
    				<li><a href="#">Meet The Team</a></li>
    				<li><a href="#">What We Do</a></li>
    				<li><a href="#">Careers</a></li>
    			</ul>
    		</div>
    		<div class="clear"></div>
    	</div>
    </footer>
</html>